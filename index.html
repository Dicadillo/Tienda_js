<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta authors="Santiago Padilla and Aitor Pelaez">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inicio</title>
    <style>
        .contenedor {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }

        .contenido {
            text-align: center;
            color: white;
        }

        body {
            background-color: black;
        }
    </style>
</head>
<header>

</header>

<body>
    <div>
        <div class="contenido">
            <!-- aquí está el buscador -->
            <form onsubmit="buscarProducto(); return false;">
                Buscar: <input type="search" id="bname">
                <button type="submit">Enviar</button>
            </form>
            <p class="El_producto_es">El producto es: <span id="producto"></span></p>
        </div>
    </div>
</body>
<footer>
    
</footer>
<script>
    let lista_productos = {
        champu: {
            Descripcion: "Un champu",
            Importe: 10,
            Stock: 20
        },
        jabon: {
            Descripcion: "Un jabon",
            Importe: 5,
            Stock: 60
        },
        gelatina: {
            Descripcion: "Un gelatina",
            Importe: 2,
            Stock: 100
        },
        desodorante: {
            Descripcion: "Un desodorante",
            Importe: 6,
            Stock: 200
        },
        ambientador: {
            Descripcion: "Un ambientador",
            Importe: 23,
            Stock: 253
        }
    };

    function buscarProducto() {
        var nombre_producto = document.getElementById("bname").value.toLowerCase();
        var lista_claves = Object.keys(lista_productos);
        for (var i = 0; i < lista_claves.length; i++) {
            if (lista_claves[i].toLowerCase() === nombre_producto) {
                var producto_encontrado = lista_productos[lista_claves[i]];
                var mensaje = "El producto " + nombre_producto + " tiene un precio de " + producto_encontrado.Importe + " y una cantidad de " + producto_encontrado.Stock + ".";
                document.getElementById("producto").innerHTML = mensaje;
                return;
            }
        }
        document.getElementById("producto").innerHTML = "Producto no encontrado";
    }

</script>
<script>
    const exp = /^[0-9]+$/;
    function validarNum(numero) {
        if (exp.test(numero)) {
            console.log("El número es válido");
        } else {
            console.log("El número no es válido");
        }
    }
    fetch(lista_productos)
        // .then(response => response.json())
        .then(producto => {
            if (producto.stock > 0) {
                console.log('El producto está disponible');
            } else {
                fetch(lista_productos)
                    .then(response => response.json())
                    .then(productos => {
                        let proParecidos = productos.filter(p => p.codigo === producto.codigo && p.id !== producto.id);
                        console.log('No hay stock disponible para este producto. Aquí hay algunos productos similares:');
                        proParecidos.map(p => console.log(p.nombre));
                    });
            }
        });


</script>




</html>